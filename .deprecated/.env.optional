# =============================================================================
# OPTIONAL ENVIRONMENT OVERRIDES
# =============================================================================
# Copy the lines you need into the relevant .env.* file if you want to change
# the default behaviour. The stock stack runs without these settings.

# -----------------------------------------------------------------------------
# General stack metadata (.env)
# -----------------------------------------------------------------------------
# Adjust these when you host multiple copies of the stack or integrate with
# tooling that reads Compose metadata.
# Compose and documentation build URLs from this domain name.
DOMAIN=localhost
# Helps scripts differentiate between dev/staging/prod stacks.
ENVIRONMENT=development
# Override when you need distinct volume/network prefixes.
PROJECT_NAME=lightrag
# Point automation at an alternate compose bundle.
COMPOSE_FILE=docker-compose.yaml

# Provide a different username for the monitoring basic auth challenge. If you
# change this, update the caddy.basic_auth label to match.
MONITOR_BASIC_AUTH_USER=admin

# Gate access to Qdrant and Memgraph admin endpoints behind their own basic
# auth layers when exposed through Caddy.
QDRANT_BASIC_AUTH_USER=admin
QDRANT_BASIC_AUTH_HASH="\$2a\$14\$d.8uVlqUq8aqXpIZO55kReuBzFNrL.Zs3dNmdisw91zlI0cA2EKam"
GRAPH_BASIC_AUTH_USER=admin
GRAPH_BASIC_AUTH_HASH="\$2a\$14\$d.8uVlqUq8aqXpIZO55kReuBzFNrL.Zs3dNmdisw91zlI0cA2EKam"

# -----------------------------------------------------------------------------
# Caddy reverse proxy (.env.caddy)
# -----------------------------------------------------------------------------
# Supply a contact email if you ever switch to public ACME endpoints.
CADDY_EMAIL=admin@dev.localhost

# Disable TLS verification when proxying self-signed upstreams.
CADDY_SKIP_VERIFY=true

# Tune how often the docker-proxy plugin polls for container changes.
CADDY_DOCKER_POLLING_INTERVAL=5s
CADDY_DOCKER_REFRESH_INTERVAL=30s

# Expose or relocate the Caddy admin API and logs.
CADDY_ADMIN_LISTEN=:2019
CADDY_LOG_LEVEL=INFO
CADDY_ACCESS_LOG=/var/log/caddy/access.log
CADDY_ERROR_LOG=/var/log/caddy/error.log

# -----------------------------------------------------------------------------
# Redis / Qdrant / Memgraph services (.env.databases)
# -----------------------------------------------------------------------------
# Namespace keys per workspace when you need to share backends across stacks.
# Prefix all Redis keys to avoid collisions across environments.
REDIS_WORKSPACE=production
# Store LightRAG collections under a distinct Qdrant namespace.
QDRANT_WORKSPACE=production
# Separates Memgraph graphs when multiple stacks reuse the same instance.
MEMGRAPH_WORKSPACE=production

# Resource planning knobs that mirror arguments already passed on the command
# line. Override when you want to keep definitions in environment files.
# Cap Redis memory usage without editing the compose command.
REDIS_MAX_MEMORY=1gb
# Persist Redis data across container restarts.
REDIS_PERSISTENCE=yes
# Document expected Qdrant collection growth for capacity planning.
QDRANT_COLLECTION_SIZE=1000000
# Raise or lower HNSW connectivity to balance recall and memory.
QDRANT_HNSW_M=16
# Increase Memgraph memory allocation beyond the baked-in default.
MEMGRAPH_MEMORY_LIMIT=4096
# Verbosity level for Memgraph logs when debugging.
MEMGRAPH_LOG_LEVEL=WARNING

# Pre-fill Memgraph Lab's quick connect widget with a different target.
QUICK_CONNECT_MG_HOST=graph
QUICK_CONNECT_MG_PORT=7687

# -----------------------------------------------------------------------------
# Monitoring dashboard (.env.monitoring)
# -----------------------------------------------------------------------------
# Change Isaiah's binding or disable its internal checks if required.
# Bind to a different adapter (for example, localhost) when restricting access.
ISAIAH_HOST=0.0.0.0
# Move the UI off the default port to avoid conflicts.
ISAIAH_PORT=3000
# Skip container polling if you only need static status information.
HEALTH_CHECK_ENABLED=true
# Slow down health checks on resource-constrained hosts.
HEALTH_CHECK_INTERVAL=30
# Switch badge styling between icon/text.
CONTAINER_HEALTH_STYLE=icon
# Require credentials inside Isaiah itself instead of only via Caddy.
AUTHENTICATION_ENABLED=false

# -----------------------------------------------------------------------------
# LightRAG service (.env.lightrag)
# -----------------------------------------------------------------------------
# Cosmetic metadata shown in downstream clients.
WEBUI_TITLE=LightRAG Production
WEBUI_DESCRIPTION=Production RAG System with Knowledge Graphs

# Scale the worker pool when tuning throughput for larger documents.
WORKERS=8

# LightRAG inherits the database workspace variables above; override WORKSPACE
# here when you need an instance-specific label.
WORKSPACE=production

# -----------------------------------------------------------------------------
# OpenWebUI frontend (.env.openwebui)
# -----------------------------------------------------------------------------
# Update branding text and session lifetimes for your organisation.
# Rename the UI header/title bar.
WEBUI_NAME=LightRAG Production
# Adjust the short description shown in metadata.
WEBUI_DESCRIPTION=RAG System with Knowledge Graphs
# Lengthen or shorten JWT lifetimes to match your auth policy.
JWT_EXPIRES_IN=1h

# Relax sign-in policies when you want to allow more users to onboard.
# Enable OAuth providers as alternative login methods.
ENABLE_OAUTH_SIGNUP=false
# Allow administrators to export application data from the UI.
ENABLE_ADMIN_EXPORT=true
# Let users publish prompts/conversations publicly.
ENABLE_COMMUNITY_SHARING=false

# Modify upload limits and history retention for heavier workloads.
# Increase the maximum file size accepted per upload (in MB).
FILE_UPLOAD_SIZE_LIMIT=200
# Retain more messages per conversation thread.
MAX_CHAT_HISTORY=50

# Supply Redis connection details explicitly when REDIS_URL is not enough.
REDIS_HOST=kv
REDIS_PORT=6379

# Toggle optional RAG helpers.
# Blend sparse + dense scoring when supported by the backend.
ENABLE_RAG_HYBRID_SEARCH=true
# Allow the server to fetch referenced URLs during ingestion.
ENABLE_RAG_LOCAL_WEB_FETCH=true
# Enable external web search (requires provider credentials).
ENABLE_RAG_WEB_SEARCH=false

# Fine-tune embedding search performance.
# Increase batch size to trade memory for throughput.
RAG_EMBEDDING_BATCH_SIZE=10
# Retrieve more stored chunks per query.
RAG_TOP_K=5
# Raise the minimum relevance needed for a match.
RAG_RELEVANCE_THRESHOLD=0.0

# Additional UI features that are not required for the base workflow.
# Enable Qdrant's full-text search capability in the UI.
ENABLE_FULLTEXT_SEARCH=true
# Show model filters to help users switch providers quickly.
ENABLE_MODEL_FILTER=true
# Stream tokens to the browser instead of waiting for full responses.
ENABLE_STREAMING=true

# Rate limiting and cookie hardening; enable when exposing the UI beyond local
# development.
# Apply global per-minute request budgets.
ENABLE_RATE_LIMITING=true
# Store counters in Redis so limits work across replicas.
RATE_LIMIT_STORE=redis
# Cap how many requests a user/IP can make per minute.
RATE_LIMIT_PER_MINUTE=60
# Cap hourly request volumes.
RATE_LIMIT_PER_HOUR=1000
# Force cookies to be sent only over HTTPS when behind TLS.
SESSION_COOKIE_SECURE=true
# Mark cookies as HttpOnly to block client-side scripts from reading them.
SESSION_COOKIE_HTTPONLY=true
